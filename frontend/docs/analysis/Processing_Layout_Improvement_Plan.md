# 処理画面レイアウト改善計画

## 現状分析

### 現在の実装
- **構造**: `min-h-screen flex` による横並びレイアウト
- **幅配分**: 左右それぞれ50%（`w-1/2`）
- **スクロール**: 各パネル内部で個別にスクロール可能だが、全体もスクロールする可能性あり

### 問題点
1. **画面全体のスクロール**: `min-h-screen` により、コンテンツが増えると画面全体がスクロール
2. **フレームの独立性不足**: 左右パネルが完全に独立したフレームになっていない
3. **ヘッダー固定なし**: 各パネルのヘッダーもスクロールに含まれる

## 改善方針

### 目標
1. 左右パネルを完全に独立したフレームとして分離
2. 各パネルで独立したスクロールを実現
3. 画面全体は固定（スクロール禁止）

### 技術的アプローチ

#### 1. 全体構造の変更
```css
/* 現在 */
min-h-screen flex

/* 改善後 */
h-screen overflow-hidden flex
```

#### 2. 左パネル（ログ・フィードバック）
```
構造:
├── ヘッダー（固定）
├── ログエリア（スクロール可能）
└── フィードバック入力（固定）
```

#### 3. 右パネル（フェーズカード）
```
構造:
├── ヘッダー（固定）
└── フェーズカード（スクロール可能）
```

## 実装詳細

### レイアウト構造
```typescript
<div className="h-screen overflow-hidden flex">
  {/* 左パネル - 固定高さ、内部スクロール */}
  <div className="w-1/2 h-full flex flex-col">
    <header className="flex-shrink-0">...</header>
    <main className="flex-1 overflow-y-auto">...</main>
    <footer className="flex-shrink-0">...</footer>
  </div>
  
  {/* 右パネル - 固定高さ、内部スクロール */}
  <div className="w-1/2 h-full flex flex-col">
    <header className="flex-shrink-0">...</header>
    <main className="flex-1 overflow-y-auto">...</main>
  </div>
</div>
```

### CSSクラスの役割
| クラス | 役割 |
|--------|------|
| `h-screen` | ビューポート高さ100%に固定 |
| `overflow-hidden` | 全体のスクロール防止 |
| `h-full` | 親要素の高さ100% |
| `flex-shrink-0` | ヘッダー/フッターの縮小防止 |
| `flex-1` | 残りスペースを占有 |
| `overflow-y-auto` | 縦スクロール有効化 |

## 期待される効果

### ユーザビリティ向上
1. **独立スクロール**: ログを見ながらフェーズカードをスクロール可能
2. **固定ヘッダー**: 常に進捗状況が確認可能
3. **固定フィードバック**: いつでもフィードバック入力可能

### 視覚的改善
1. **フレーム感**: 左右が明確に分離された印象
2. **安定感**: 画面全体が動かない安定した操作感
3. **プロフェッショナル**: IDEやClaude風の洗練されたレイアウト

## レスポンシブ対応

### ブレークポイント
```css
/* タブレット以下 */
@media (max-width: 768px) {
  /* 縦積みレイアウトに変更 */
  flex-direction: column;
  /* 各パネルを50%高さに */
  .panel { height: 50%; }
}
```

## 設計書への反映事項

### 追加すべき記載
1. **独立スクロール仕様**: 左右パネルの独立スクロール動作
2. **固定要素定義**: ヘッダー、フッターの固定仕様
3. **高さ制約**: 画面全体を100vh固定とする仕様

### 更新箇所
- 2.3 レイアウトシステム
- 3.2 処理画面（HITLフィードバック）
- 5.1 レスポンシブデザイン

## 実装優先度

1. **高**: 全体構造の変更（h-screen, overflow-hidden）
2. **中**: 各パネルの独立スクロール実装
3. **低**: レスポンシブ対応の調整