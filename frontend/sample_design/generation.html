<!DOCTYPE html>
<html lang="ja" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>生成中 - AI Manga Generator</title>
  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="styles/generation.css">
</head>
<body>
  <div class="app-container">
    <!-- ヘッダー -->
    <header class="minimal-header">
      <div class="header-inner">
        <h1 class="app-title">AI Manga</h1>
        <div class="header-actions">
          <span class="generation-timer" id="generation-timer">00:00</span>
          <button class="theme-toggle" id="theme-toggle" aria-label="テーマを切り替え">
            <svg class="theme-icon sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="5"/>
              <line x1="12" y1="1" x2="12" y2="3"/>
              <line x1="12" y1="21" x2="12" y2="23"/>
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
              <line x1="1" y1="12" x2="3" y2="12"/>
              <line x1="21" y1="12" x2="23" y2="12"/>
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
            </svg>
            <svg class="theme-icon moon-icon active" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
            </svg>
          </button>
        </div>
      </div>
    </header>

    <!-- Genspark風処理画面 -->
    <main class="generation-container">
      <div class="split-layout">
        <!-- 左側: チャット形式の処理状況 -->
        <div class="chat-panel">
          <div class="chat-header">
            <h2 class="chat-title">生成プロセス</h2>
          </div>
          <div class="chat-messages" id="chat-messages">
            <!-- ユーザー入力 -->
            <div class="user-message">
              <div class="message-icon">👤</div>
              <div class="message-content">
                <p id="user-story">主人公は高校生の魔法使い。ある日、謎の生物と出会い、世界を救う冒険が始まる。</p>
              </div>
            </div>

            <!-- AI応答開始 -->
            <div class="assistant-message">
              <div class="message-icon">🤖</div>
              <div class="message-content">
                <p>素敵な物語ですね！AIマンガ生成を開始します。</p>
              </div>
            </div>

            <!-- フェーズ1: 物語分析 -->
            <div class="assistant-message" id="phase-1">
              <div class="message-icon">📖</div>
              <div class="message-content">
                <div class="phase-header">
                  <span class="phase-title">フェーズ 1: 物語分析</span>
                  <span class="phase-status completed">✓ 完了</span>
                </div>
                <p class="phase-description">物語の構造とキャラクターを分析しました。</p>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 100%"></div>
                </div>
              </div>
            </div>

            <!-- フェーズ2: キャラクター生成 -->
            <div class="assistant-message processing" id="phase-2">
              <div class="message-icon">🎨</div>
              <div class="message-content">
                <div class="phase-header">
                  <span class="phase-title">フェーズ 2: キャラクター生成</span>
                  <span class="phase-status">処理中...</span>
                </div>
                <p class="phase-description">主要キャラクターのビジュアルを生成中...</p>
                <div class="progress-bar">
                  <div class="progress-fill animating" style="width: 45%"></div>
                </div>
              </div>
            </div>

            <!-- フェーズ3: シーン構成 -->
            <div class="assistant-message pending" id="phase-3">
              <div class="message-icon">🎬</div>
              <div class="message-content">
                <div class="phase-header">
                  <span class="phase-title">フェーズ 3: シーン構成</span>
                  <span class="phase-status">待機中</span>
                </div>
                <p class="phase-description">コマ割りとシーン構成を準備中...</p>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 0%"></div>
                </div>
              </div>
            </div>

            <!-- フェーズ4: マンガ生成 -->
            <div class="assistant-message pending" id="phase-4">
              <div class="message-icon">✨</div>
              <div class="message-content">
                <div class="phase-header">
                  <span class="phase-title">フェーズ 4: マンガ生成</span>
                  <span class="phase-status">待機中</span>
                </div>
                <p class="phase-description">最終的なマンガを生成します...</p>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 0%"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- 右側: 生成結果の表示 -->
        <div class="output-panel">
          <div class="output-header">
            <h2 class="output-title">プレビュー</h2>
            <div class="output-status" id="output-status">
              <span class="status-dot pulse"></span>
              <span class="status-text">生成中...</span>
            </div>
          </div>
          <div class="output-content" id="output-content">
            <!-- キャラクター生成結果のプレビュー -->
            <div class="preview-section active" id="preview-characters">
              <h3 class="preview-subtitle">生成されたキャラクター</h3>
              <div class="character-grid">
                <div class="character-card generating">
                  <div class="character-placeholder">
                    <div class="skeleton-loader"></div>
                  </div>
                  <p class="character-name">主人公</p>
                </div>
                <div class="character-card generating">
                  <div class="character-placeholder">
                    <div class="skeleton-loader"></div>
                  </div>
                  <p class="character-name">謎の生物</p>
                </div>
              </div>
            </div>

            <!-- シーン構成のプレビュー -->
            <div class="preview-section" id="preview-scenes">
              <h3 class="preview-subtitle">シーン構成</h3>
              <div class="scene-timeline">
                <div class="scene-item">
                  <span class="scene-number">1</span>
                  <span class="scene-description">出会い</span>
                </div>
                <div class="scene-item">
                  <span class="scene-number">2</span>
                  <span class="scene-description">冒険の始まり</span>
                </div>
                <div class="scene-item">
                  <span class="scene-number">3</span>
                  <span class="scene-description">試練</span>
                </div>
                <div class="scene-item">
                  <span class="scene-number">4</span>
                  <span class="scene-description">クライマックス</span>
                </div>
              </div>
            </div>

            <!-- 最終プレビュー -->
            <div class="preview-section" id="preview-final">
              <h3 class="preview-subtitle">マンガプレビュー</h3>
              <div class="manga-preview-container">
                <div class="manga-preview-placeholder">
                  <div class="generating-animation">
                    <div class="pulse-circle"></div>
                    <p class="generating-text">マンガを描いています...</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
  
  <script src="scripts/generation.js"></script>
</body>
</html>